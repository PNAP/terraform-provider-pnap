---
layout: "pnap"
page_title: "phoenixNAP: pnap_rancher_cluster"
sidebar_current: "docs-pnap-resource-rancher-cluster"
description: |-
  Provides a phoenixNAP Rancher Cluster resource. This can be used to create and delete Rancher Server deployments.
---

# pnap_rancher_cluster Resource

Provides a phoenixNAP Rancher Cluster resource. This can be used to create and delete Rancher Server deployments.



## Example Usage

Create a Rancher Cluster

```hcl
# Create a Rancher Cluster
resource "pnap_rancher_cluster" "Rancher-Deployment-1" {
    name = "Rancher-Deployment-1"
    description = "A Rancher Server deployment with specific server type."
    location = "PHX"
    node_pools {        
        node_count = 1
        server_type = "s1.c1.medium"
        ssh_config {
            install_default_keys = false
            keys = [
                "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDF9LdAFElNCi7JoWh6KUcchrJ2Gac1aqGRPpdZNowObpRtmiRCecAMb7bUgNAaNfcmwiQi7tos9TlnFgprIcfMWb8MSs3ABYHmBgqEEt3RWYf0fAc9CsIpJdMCUG28TPGTlRXCEUVNKgLMdcseAlJoGp1CgbHWIN65fB3he3kAZcfpPn5mapV0tsl2p+ZyuAGRYdn5dJv2RZDHUZBkOeUobwsij+weHCKAFmKQKtCP7ybgVHaQjAPrj8MGnk1jBbjDt5ws+Be+9JNjQJee9zCKbAOsIo3i+GcUIkrw5jxPU/RTGlWBcemPaKHdciSzGcjWboapzIy49qypQhZe1U75 userOne",
                "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDF9LdAFElNCi7JoWh6KUcchrJ2Gac1aqGRPpdZNowObpRtmiRCecAMb7bUgNAaNfcmwiQi7tos9TlnFgprIcfMWb8MSs3ABYHmBgqEEt3RWYf0fAc9CsIpJdMCUG28TPGTlRXCEUVNKgLMdcseAlJoGp1CgbHWIN65fB3he3kAZcfpPn5mapV0tsl2p+ZyuAGRYdn5dJv2RZDHUZBkOeUobwsij+weHCKAFmKQKtCP7ybgVHaQjAPrj8MGnk1jBbjDt5ws+Be+9JNjQJee9zCKbAOsIo3i+GcUIkrw5jxPU/RTGlWBcemPaKHdciSzGcjWboapzIy49qypQhZe1U75 userTwo"
            ]
        }               
    }    
}
```

## Argument Reference

The following arguments are supported:

* `name` - Cluster (Rancher Cluster) name. This field is autogenerated if not provided.
* `description` - Cluster description.
* `location` - (Required) Deployment location. Cannot be changed once the cluster is created. For a full list of allowed locations visit [API docs](https://developers.phoenixnap.com/docs/rancher/1)
* `node_pools` - The node pools associated with the cluster (must contain exactly one item). The `node_pools` block has 4 fields.
    * `name` - The name of the node pool.
    * `node_count` - Number of configured nodes. Currently only node counts of 1 and 3 are possible.
    * `server_type` - Node server type. Default value is "s0.d1.small". For a full list of allowed values visit [API docs](https://developers.phoenixnap.com/docs/rancher/1)
    * `ssh_config` - (Write-only) Configuration defining which public SSH keys are pre-installed as authorized on the server. The `ssh_config` block has 3 fields.
        * `install_default_keys` - Define whether public keys marked as default should be installed on this node. Default value is true.
        * `keys` - List of public SSH keys.
        * `key_ids` - List of public SSH key identifiers.
* `configuration` - (Write-only) Rancher configuration parameters. The `configuration` block has 7 fields.
    * `token` - Shared secret used to join a server or agent to a cluster.
    * `tls_san` - This maps to rancher's tls-san. Add additional hostname or IP as a Subject Alternative Name in the TLS cert.
    * `etcd_snapshot_schedule_cron` - This maps to rancher's etcd-snapshot-schedule-cron. Snapshot interval time in cron spec.
    * `etcd_snapshot_retention` - This maps to rancher's etcd-snapshot-retention. Number of snapshots to retain. Default value is 5.
    * `node_taint` - This maps to rancher's node-taint. Registering kubelet with set of taints.
    * `cluster_domain` - This maps to rancher's cluster-domain. Cluster Domain.
    * `certificates` - Define the custom SSL certificates to be used instead of defaults. The `certificates` block has 3 fields.
        * `ca_certificate` - The SSL CA certificate to be used for rancher admin.
        * `certificate` - The SSL certificate to be used for rancher admin.
        * `certificate_key` - The SSL certificate key to be used for rancher admin.
* `workload_configuration` - (Write-only) Workload cluster configuration parameters. The `workload_configuration` block has 4 fields.
    * `name` - The name of the workload cluster. This field is autogenerated if not provided.
    * `server_count` - Number of configured servers. Currently only server counts of 1 and 3 are possible. Default value is 1.
    * `server_type` - (Required) Node server type. Cannot be changed once the cluster is created. Default value is "s0.d1.small". For a full list of allowed values visit [API docs](https://developers.phoenixnap.com/docs/rancher/1)
    * `location` - (Required) Workload cluster location. Cannot be changed once the cluster is created. For a full list of allowed locations visit [API docs](https://developers.phoenixnap.com/docs/rancher/1)


## Attributes Reference

The following attributes are exported:

* `id` - The cluster identifier.
* `name` - Cluster name. This field is autogenerated if not provided.
* `description` - Cluster description.
* `location` - Deployment location.
* `initial_cluster_version` - The Rancher version that was installed on the cluster during the first creation process.
* `node_pools` - The node pools associated with the cluster (must contain exactly one item).    
    * `name` - The name of the node pool.
    * `node_count` - Number of configured nodes.
    * `server_type` - Node server type. Default value is "s0.d1.small". 
    * `ssh_config` - Configuration defining which public SSH keys are pre-installed as authorized on the server.
        * `install_default_keys` - Define whether public keys marked as default should be installed on this node. Default value is true.
        * `keys` - List of public SSH keys.
        * `key_ids` - List of public SSH key identifiers.       
    * `nodes` - The nodes associated with this node pool.            
        * `server_id` - The server identifier.
* `metadata` - Connection parameters to use to connect to the Rancher Server Administrative GUI.
    * `url` - The Rancher Server URL.
    * `username` - The username to use to login to the Rancher Server. This field is returned only as a response to the create cluster request. Make sure to take note or you will not be able to access the server.
    * `password` - This is the password to be used to login to the Rancher Server. This field is returned only as a response to the create cluster request. Make sure to take note or you will not be able to access the server.
* `status_description` - The cluster status.
